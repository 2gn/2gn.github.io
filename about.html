<html>

<head>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header>
    <div>
      <ul>
        <li>
          <a href="/">home</a>
        </li>
        <li>
          <a href="/blog">blog</a>
        </li>
        <li>
          <a href="/about">about</a>
        </li>
        <li>
          <a href="/">news</a>
        </li>
      </ul>
    </div>
  </header>

  <div id="banner">
    ABOUT ME
  </div>

  <div id="main">
    <div>
      <div>
        <h2>STUFF I LIKE</h2>
        <div>
          <ul>
            <li>
              Opensource software
            </li>
            <li>
              Tinkering stuff
            </li>
            <li>
              Linux
            </li>
            <li>
              Selfhosting
            </li>
          </ul>
        </div>
      </div>
      <div>
        <h2>FAVOURITE MOVIES/TV SERIES</h2>
        <div>
          <ul>
            <li>
              Fight Club (1999)
            </li>
            <li>
              Max Max 1,2 and Fury Road
            </li>
            <li>
              Die Hard (1988)
            </li>
            <li>
              Mr.Robot
            </li>
            <li>
              Gravity (2020)
            </li>
          </ul>
        </div>
      </div>
      <div>
        <h2>LINKS</h2>
        <div>
          <ul>
            <li>
              <a target="#" href="https://bookwyrm.social/user/scanner">bookwyrm</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <hr>
    This page is handcrafted using HTML, CSS and JS
    <br>
    Also, it's not copyrighted because fuck copyrights.
  </footer>

  <div id="overlay">

  </div>

  <style>
    * {
      text-shadow: 0 0 1.5px var(--robco-green);
      border-color: var(--robco-green);
    }

    a {
      color: var(--robco-green);
      text-decoration: none;

      &:hover {
        color: var(--robco-background);
        background-color: var(--robco-green);
      }
    }

    input {
      background-color: var(--robco-background);
      color: var(--robco-green);
      font-family: FixedSys;
    }

    #banner {
      text-align: center;
      font-size: 35px;
      padding: 50px 0px 50px 0px;
    }

    header {
      width: 100%;

      div {
        ul {
          list-style: none;
          display: flex;
          justify-content: center;
          padding-left: 0px;


          li {
            text-transform: uppercase;
            border-style: solid;
            border-width: 1px;
            margin: 0px 10px 0px 10px;
            padding: 10px 0px 10px 0px;
            display: block;

            &>a {
              padding: 10px 20px 10px 20px;
            }


            &:hover {
              background-color: var(--robco-green);

              &>a {
                color: var(--robco-background);
              }
            }
          }
        }
      }
    }

    footer {
      width: 100%;
      text-align: center;
      bottom: 0px;
    }

    #main {
      display: flex;
      justify-content: center;

      &>div {
        width: 70%;

        &>div {
          margin: 20px 0px 20px 0px;

          &>div {
            box-shadow: 0 0 1.5px var(--robco-green);
            padding: 10px;
            width: 100%;
            border-width: 1px;
            border-color: var(--robco-green);
            border-style: solid;
          }
        }
      }

    }

    img {
      filter: sepia(80%);
    }
  </style>
  <script>

    async function get_lb_recordings() {
      console.log("fetching data from listenbrainz...");
      let response = await fetch("https://api.listenbrainz.org/1/stats/user/trees/recordings");
      let _data = await response.json();
      console.log(_data)
      return _data.payload.recordings
    }

    async function get_playing_now() {
      let response = await fetch("https://api.listenbrainz.org/1/user/trees/playing-now");
      let _data = await response.json();
      return _data.payload.listens[0].track_metadata
    }

    get_playing_now().then(song => {
      let now_playing = document.getElementById("now-playing");
      now_playing.innerText = song.track_name + " - " + song.artist_name;
      now_playing.href = `https://listenbrainz.org/search/?search_term=${song.track_name.replace(" ", "+") + "+" + song.artist_name.replace(" ", "+")}&search_type=track`;
    })

    get_lb_recordings().then(recordings => {
      let listen_list = document.getElementById("most-listened-songs");
      for (let recording of recordings) {
        let song_card = document.createElement("div");
        let song_url = document.createElement("a")
        song_url.innerText = recording.track_name + " - " + recording.artist_name;
        song_url.href = "https://listenbrainz.org/track/" + recording.recording_mbid;
        song_url.target = "#"
        song_card.appendChild(song_url)
        listen_list.appendChild(song_card);
      }
    })

  </script>
</body>

</html>
